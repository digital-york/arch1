
<div class="popup" style="min-height: 500px">

  <% if @place.new_record? %>
      <div class="popup_title">Add Place</div>
  <% else %>
      <div class="popup_title">Edit Place</div>
  <% end %>

  <% if @place_name != nil && @place_name != '' %>
      <div id="popup_info" class="popup_info" style="display: none; text-align: center"><%= @place_name %> has been added</div>
  <% end %>

  <% if @error != nil && @error != '' %>
      <div class="popup_error"><%= @error.html_safe %></div>
  <% end %>

  <p>
    <em>* Please construct place names according to <a href="http://archiveshub.ac.uk/ncarules/" target="_blank">NCARules</a></em>
  </p>

  <div>
    <% if @place.new_record? %>
        <%= link_to "Go back to search page", places_path, method: :get %>
    <% else %>
        <%= link_to "Go back to view page", place_path, method: :get %>
    <% end %>
  </div>

  <div style="clear: both"></div>

  <%= form_for @place, html: {style: 'margin-top: 10px; margin-bottom: 0px'} do |f| %>

      <div class='tab1'>

        <table cellspacing="0" style="width: 100%; font-size: 0.95em">

          <%# Place Name %>
          <tr>
            <th style="width: 150px">*Place Name:</th>
            <td>
              <%= text_field_tag "place[place_name]", @place.place_name %>
            </td>
          </tr>

          <%# Civil Parish or Township (place_ADM4) %>
          <tr>
            <th>Civil Parish or Township:</th>
            <td>
              <%= text_field_tag "place[parent_ADM4]", @place.parent_ADM4 %>
            </td>
          </tr>

          <%# Town, City or District (place_ADM3) %>
          <tr>
            <th>Town, City or District:</th>
            <td>
              <%= text_field_tag "place[parent_ADM3]", @place.parent_ADM3 %>
            </td>
          </tr>

          <%# County (place_ADM2) %>
          <tr>
            <th>County:</th>
            <td>
              <%= text_field_tag "place[parent_ADM2]", @place.parent_ADM2 %>
            </td>
          </tr>

          <%# Country (e.g. England) (place_ADM1) %>
          <tr>
            <th>Country (e.g. England):</th>
            <td>
              <%= text_field_tag "place[parent_ADM1]", @place.parent_ADM1 %>
            </td>
          </tr>

          <%# Country (parent_country) %>
          <tr>
            <th>Country:</th>
            <td>
              <%= text_field_tag "place[parent_country]", @place.parent_country %>
            </td>
          </tr>

          <%# Place Type (feature_code) %>
          <tr>
            <th>Place Type:
              <img src="/assets/plus_sign.png" alt="plus icon" class="plus_icon click_popup_multiple_field_button" jq_type_1='place' jq_type_2="feature_code"/>
            </th>
            <td>
              <div class="field_group">
                <% @place.feature_code.each do |feature_code| %>
                    <div class="field_single">
                      <%= text_field_tag 'place[feature_code][]', feature_code %>
                      <img alt="Delete icon" src="/assets/delete.png" class="delete_icon click_remove_field_level1" jq_tag_type="input">
                    </div>
                <% end %>
              </div>
            </td>
          </tr>

          <%# Same As %>
          <tr>
            <th>Same As:
              <img src="/assets/plus_sign.png" alt="plus icon" class="plus_icon click_popup_multiple_field_button" jq_type_1='place' jq_type_2="same_as"/>
            </th>
            <td>
              <div class="same_as">
                <% @place.same_as.each do |same_as| %>
                    <div class="field_single">
                      <%= text_field_tag 'place[same_as][]', same_as %>
                      <img alt="Delete icon" src="/assets/delete.png" class="delete_icon click_remove_field_level1" jq_tag_type="input">
                    </div>
                <% end %>
              </div>
            </td>
          </tr>

          <%# Related Authority %>
          <tr>
            <th>Related Authority:
              <img src="/assets/plus_sign.png" alt="plus icon" class="plus_icon click_popup_multiple_field_button" jq_type_1='place' jq_type_2="related_authority"/>
            </th>
            <td>
              <div class="field_group">
                <% @place.related_authority.each do |related_authority| %>
                    <div class="field_single">
                      <%= text_field_tag 'place[related_authority][]', related_authority %>
                      <img alt="Delete icon" src="/assets/delete.png" class="delete_icon click_remove_field_level1" jq_tag_type="input">
                    </div>
                <% end %>
              </div>
            </td>
          </tr>

          <%# Variant Names %>
          <%# Note that this is 'altlabel' in the model %>
          <tr>
            <th>Variant Names:
              <img src="/assets/plus_sign.png" alt="plus icon" class="plus_icon click_popup_multiple_field_button" jq_type_1='place' jq_type_2="altlabel"/>
            </th>
            <td>
              <div class="field_group">
                <% @place.altlabel.each do |altlabel| %>
                    <div class="field_single">
                      <%= text_field_tag 'place[altlabel][]', altlabel %>
                      <img alt="Delete icon" src="/assets/delete.png" class="delete_icon click_remove_field_level1" jq_tag_type="input">
                    </div>
                <% end %>
              </div>
            </td>
          </tr>

        </table>

        <%# Submit %>
        <p style="margin-top: 10px">
          <% if @place.new_record? %>
              <%= f.submit 'Submit' %>
              <%= f.submit 'Submit and Close' %>
          <% else %>
              <%= f.submit 'Update' %>
          <% end %>
        </p>

      </div>

      <div style="clear: both"></div>

  <% end %>

</div>
