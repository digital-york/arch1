
<div class="popup">

  <div class="popup_breadcrumb"><%= link_to 'Admin', admins_path %> Â» <%= capitalize_first_letter(session[:concept_list_type]) %> List</div>

  <div class="popup_title"><%= capitalize_first_letter(session[:concept_list_type]) %> List</div>

  <div>

    <div>
      <a href="<%= new_concept_path %>"><input type = "button" value="Add <%= capitalize_first_letter(session[:concept_list_type]) %>" title="Add a new <%= session[:concept_list_type] %>"/></a>
    </div>

    <%= form_tag concepts_path, :method => :get, style: 'margin-top: 8px' do |f| %>
        <div class="search_box">
          <table>
          <tr>
            <td>Search Term:</td>
            <td><%= text_field_tag 'search_term', nil, class: 'text_field_search', id: 'search_box', value: session[:concept_search_term] %></td>
            <td colspan='2'><%= submit_tag 'Search' %></td>
          </tr>
          </table>
        </div>
        <div style="clear: both"></div>
    <% end %>

  </div>

  <div style="margin: 30px 0px 20px 2px">

    <%
       if @search_array != nil && @search_array != ''
    %>

        <%
          type = session[:concept_list_type]
        %>

        <div style="float: left; font-weight: bold; font-size: 1.1em">
          Results:
        </div>

        <div style="clear: both"></div>

        <div class="popup_search">

          <table border='1' style="width: 100%; font-size: 1.1em; margin-top: 10px">

            <tr>
              <th>Label</th>
              <th>Alternate Label(s)</th>
              <th>Description</th>
              <th style="width: 60px">Edit</th>
              <th style="width: 60px">Delete</th>
            </tr>

            <%
               @search_array.each do |array_element|
                 id = array_element[0]
                 label = array_element[1]
                 altlabel = array_element[2]
                 description = array_element[3]
            %>
                <tr>
                  <td><%= label %></td>
                  <td>
                  <%
                      altlabel.each do |tt|
                  %>
                      <%= tt %>
                      <br/>
                  <%
                      end
                  %>
                  </td>
                  <td><%= description %></td>
                  <td style="width: 100px; text-align: center">
                    <%= button_to 'Edit', edit_concept_path(id), :method => :get, title: 'Edit element details' %>
                  </td>
                  <td style="width: 60px; text-align: center">
                    <%= button_to 'Delete', concept_path(id), :method => :delete, title: 'Delete place', :data => {:confirm => "Are you sure you want to delete '#{label}'?"} %>
                  </td>
                </tr>
        <%
           end
           end
        %>

    </table>
    </div>

    <script>
        window.onload = function () {
            document.getElementById("search_box").focus();
        };
    </script>
  </div>

</div>
